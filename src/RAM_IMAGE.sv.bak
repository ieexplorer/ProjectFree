//Follow the refernece of sync_rom.sv ELEC222 of Telecom ParisTech and the RAM example of Altera

module RAM_IMAGE  #( parameter d_width = 8,
                     parameter a_width = 16)
                   ( input logic clk,
                     input logic we,
                     input logic [d_width-1:0] data_in,
                     input logic [a_width-1:0] address,
                     output logic [d_width-1:0] data_out
                     );
		
	logic [d_width-1:0] mem [0:2**a_width-1];		
	logic [a_width-1:0] addr_reg ;
initial
begin
	//Initialization of RAM_IMAGE
    $readmemh("bogartbruite.hex", mem);
end

always_ff @(posedge clk)
begin
    
    if (we) 
        mem[address] <= data_in;
        addr_reg <= address;
end
assign data_out = mem[addr_reg]; 

endmodule